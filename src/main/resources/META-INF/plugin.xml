<idea-plugin>
    <id>com.zachholt.reference-lookup</id>
    <name>Reference Lookup</name>
    <vendor email="zachholt@example.com" url="https://github.com/zachholt">Zach Holt</vendor>

    <description><![CDATA[
    A fast and easy-to-use reference lookup tool for IntelliJ IDEA.<br/>
    <br/>
    Features:<br/>
    - NEW: Reference Browser tool window with tree view by categories<br/>
    - Right-click on any selected text to look up references<br/>
    - Quick access to top 10 matches directly in context menu<br/>
    - Fuzzy search across all references<br/>
    - Support for large reference datasets<br/>
    - Keyboard shortcuts for fast access (Ctrl+Shift+L)<br/>
    <br/>
    Version 2.0.0 Changes:<br/>
    - Added Reference Browser tool window to replace freezing popup<br/>
    - Added category tree view for better organization<br/>
    - Improved search performance and UI responsiveness<br/>
    - Fixed context menu display issues<br/>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    
    <resource-bundle>messages.ReferenceBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Settings -->
        <applicationService serviceImplementation="com.zachholt.referencelookup.settings.ReferenceSettingsState"/>
        <applicationConfigurable parentId="tools" 
                               instance="com.zachholt.referencelookup.settings.ReferenceSettingsConfigurable"
                               id="com.zachholt.referencelookup.settings.ReferenceSettingsConfigurable"
                               displayName="Reference Lookup"/>

        <projectService serviceImplementation="com.zachholt.referencelookup.service.ReferenceDataService"/>
        <!-- Reference Browser Tool Window -->
        <toolWindow id="ReferenceBrowser"
                    secondary="false"
                    anchor="right"
                    factoryClass="com.zachholt.referencelookup.ui.ReferenceToolWindowFactory"/>
    </extensions>

    <actions>
        <!-- Quick lookup action group that shows values in submenu -->
        <group id="com.zachholt.referencelookup.QuickLookupGroup"
               class="com.zachholt.referencelookup.QuickLookupAction"
               text="Reference Lookup"
               description="Look up the selected text in the reference database"
               popup="true">
            <add-to-group group-id="EditorPopupMenu" anchor="after" relative-to-action="EditorPopupMenu1.FindRefactor"/>
        </group>
        
        <!-- Keep the keyboard shortcut for direct search -->
        <action id="com.zachholt.referencelookup.LookupAction"
                class="com.zachholt.referencelookup.LookupAction"
                text="Search All References..."
                description="Open the reference search dialog">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift L"/>
        </action>

        <!-- Create SQL from Jira ticket action -->
        <action id="com.zachholt.referencelookup.CreateSqlFromJira"
                class="com.zachholt.referencelookup.action.CreateSqlFromJiraAction"
                text="Create SQL from Jira Ticket"
                description="Create a new SQL file with Jira ticket information as header comments">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
            <add-to-group group-id="NewGroup" anchor="last"/>
        </action>
    </actions>
</idea-plugin>